/*! jQuery Before After - v0.8.5 - 2012-08-22
* https://github.com/dfadler/jquery.beforeafter
* Copyright (c) 2012 Dustin Fadler; Licensed MIT, GPL */
(function(a,b,c){function g(b){this.ele=document,this.config=a.extend({},f,b);if(this.config.legacy===!0&&!e)return!1;this.init()}var d="beforeAfter",e=Modernizr?!Modernizr.generatedcontent:document.all&&!document.querySelector,f={contentPattern:new RegExp(/content: '.'/),elements:[],extensionPattern:new RegExp(/.css$/),legacy:!0,pseudoPattern:e||a.browser.mozilla?new RegExp(/:before|:after/):new RegExp(/::before|::after/),stylesheets:document.styleSheets,stylesheetsLength:document.styleSheets.length,stylesheet:c};g.prototype.checkStylesheet=function(a){var b=this.config.stylesheets,d=b.length,a=a===c?this.config.stylesheet:a;if(a===this.config.stylesheet){var e=new RegExp(a);for(var f=0;f<d;f++)if(e.test(b[f].href))return b[f];return b}return b},g.prototype.parseStylesheet=function(a){var b=this.parseStylesheet,c=b.config={stylesheets:this.config.stylesheets,stylesheetsLength:this.config.stylesheets.length,stylesheet:a||this.config.stylesheet,pattern:this.config.pseudoPattern,declarations:[],contents:[],declarationsLength:"",declarationType:e?"selectorText":"cssText",elements:[]};if(a===this.config.stylesheet)b.parseRules(a);else for(var d=0;d<c.stylesheetsLength;d++)b.parseRules(c.stylesheets[d]);c.declarationsLength=c.declarations.length;for(var d=0;d<c.declarationsLength;d++)b.parseDeclaration(c.declarations[d],c.contents[d]);return c.elements},g.prototype.parseStylesheet.parseDeclaration=function(a,b){var c=this.config,d=new RegExp(/::/),e=a[c.declarationType].match(c.pattern),e=d.test(e)?e[0].replace("::",""):e[0].replace(":",""),f=a.selectorText.split(","),g=f.length,h,b;for(var i=0;i<g;i++)c.pattern.test(f[i])&&(h=f[i].replace(c.pattern,""));c.elements.push({selector:h,pseudoClass:e,content:b})},g.prototype.parseStylesheet.parseRules=function(a){var b=a.cssRules||a.rules,c=b.length,d=this.config;for(var e=0;e<c;e++)d.pattern.test(b[e][d.declarationType])&&(d.contents.push(b[e].style.content.charAt(1)),d.declarations.push(b[e]))},g.prototype.addContainer=function(a){var b=a.length,c=this.addContainer;if(a.length)for(var d=0;d<b;d++){var e=a[d];c.add(e)}else c.add(a)},g.prototype.addContainer.add=function(b){if(b.pseudoClass==="before"&&a(b.selector+" .before").length===0)a(b.selector).prepend('<div class="before">'+b.content+"</div>");else if(b.pseudoClass==="after"&&a(b.selector+" .after").length===0)a(b.selector).append('<div class="after">'+b.content+"</div>");else return!1},g.prototype.init=function(){var a=this.checkStylesheet(),b=this.parseStylesheet(a);this.addContainer(b)},a.fn[d]=function(c){return this.each(function(){var e=b.document;a.data(e,"plugin_"+d)||a.data(e,"plugin_"+d,new g(c))})}})(jQuery,window);